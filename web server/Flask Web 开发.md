# Flask Web 开发

> 基于Python的Web应用开发实战
>
> Miguel Grinberg 著
>
> 安道译
>
> 人民邮电出版社

## 第一部分 Flask简介 

### 第1章 安装 3 

#### 1.1 使用虚拟环境 4 

#### 1.2 使用pip安装Python包 6 

### 第2章 程序的基本结构 7 

#### 2.1 初始化 7 

#### 2.2 路由和视图函数 7 

#### 2.3 启动服务器 9 

#### 2.4 一个完整的程序 9 

#### 2.5 请求-响应循环 11 

#### 2.6 Flask扩展 15 

### 第3章 模板 19 

#### 3.1 Jinja2模板引擎 19 

#### 3.2 使用Flask-Bootstrap集成Twitter Bootstrap 23 

#### 3.3 自定义错误页面 26 

#### 3.4 链接 29 

#### 3.5 静态文件 29 

#### 3.6 使用Flask-Moment本地化日期和时间 30 

### 第4章 Web表单 33 

#### 4.1 跨站请求伪造保护 33 

#### 4.2 表单类 34 

#### 4.3 把表单渲染成HTML 35 

#### 4.4 在视图函数中处理表单 37 

#### 4.5 重定向和用户会话 39 

#### 4.6 Flash消息 41 

### 第5章 数据库 43 

#### 5.1 SQL数据库 43 

#### 5.2 NoSQL数据库 44 

#### 5.3 使用SQL还是NoSQL 45 

#### 5.4 Python数据库框架 45 

#### 5.5 使用Flask-SQLAlchemy管理数据库 46 

#### 5.6 定义模型 47 

#### 5.7 关系 49 

#### 5.8 数据库操作 50 

#### 5.9 在视图函数中操作数据库 54 

#### 5.10 集成Python shell 56 

#### 5.11 使用Flask-Migrate实现数据库迁移 56 

### 第6章 电子邮件 59 

#### 6.1 使用Flask-Mail提供电子邮件支持 59 

#### 6.2 在Python shell中发送电子邮件 60 

#### 6.3 在程序中集成发送电子邮件功能 61 

#### 6.4 异步发送电子邮件 62 

### 第7章 大型程序的结构 65 

#### 7.1 项目结构 65 

#### 7.2 配置选项 66 

#### 7.3 程序包 67 

#### 7.4 启动脚本 71 

#### 7.5 需求文件 71 

#### 7.6 单元测试 72 

#### 7.7 创建数据库 74 

## 第二部分 实例：社交博客程序 

### 第8章 用户认证 77 

#### 8.1 Flask的认证扩展 77 

#### 8.2 密码安全性 77 

#### 8.3 创建认证蓝本 80 

#### 8.4 使用Flask-Login认证用户 81 

#### 8.5 注册新用户 87 

#### 8.6 确认账户 90 

#### 8.7 管理账户 95 

### 第9章 用户角色 97 

#### 9.1 角色在数据库中的表示 97 

#### 9.2 赋予角色 99 

#### 9.3 角色验证 100 

### 第10章 用户资料 103 

#### 10.1 资料信息 103 

#### 10.2 用户资料页面 104 

#### 10.3 资料编辑器 106 

#### 10.4 用户头像 110 

### 第11章 博客文章 115 

#### 11.1 提交和显示博客文章 115 

#### 11.2 在资料页中显示博客文章 118 

#### 11.3 分页显示长博客文章列表 118 

#### 11.4 使用Markdown和Flask-PageDown支持富文本文章 124 

#### 11.5 博客文章的固定链接 127 

#### 11.6 博客文章编辑器 128 

### 第12章 关注者 131 

#### 12.1 再论数据库关系 131 

#### 12.2 在资料页中显示关注者 136 

#### 12.3 使用数据库联结查询所关注用户的文章 138 

#### 12.4 在首页显示所关注用户的文章 141 

### 第13章 用户评论 145 

#### 13.1 评论在数据库中的表示 145 

#### 13.2 提交和显示评论 146 

#### 13.3 管理评论 149 

### 第14章 应用编程接口 153 

#### 14.1 REST简介 153 

#### 14.2 使用Flask提供REST Web服务 156 

## 第三部分 成功在望 

### 第15章 测试 173 

#### 15.1 获取代码覆盖报告 173 

#### 15.2 Flask测试客户端 176 

#### 15.3 使用Selenium进行端到端测试 180 

#### 15.4 值得测试吗 184 

### 第16章 性能 185 

#### 16.1 记录影响性能的缓慢数据库查询 185 

#### 16.2 分析源码 187 

### 第17章 部署 189 

#### 17.1 部署流程 189 

#### 17.2 把生产环境中的错误写入日志 190 

#### 17.3 云部署 191 

#### 17.4 Heroku平台 191 

#### 17.5 传统的托管 200 

### 第18章 其他资源 203 

#### 18.1 使用集成开发环境 203 

#### 18.2 查找Flask扩展 204 

#### 18.3 参与Flask开发 204 